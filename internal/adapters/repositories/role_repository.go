// internal/adapters/repositories/role_repository.go
package repositories

import (
	"github.com/PatipanDev/mini-project-golang/internal/core/domain"
	"github.com/PatipanDev/mini-project-golang/internal/core/ports"
	"gorm.io/gorm"
)

type GormRoleRepository struct {
	db *gorm.DB
}

func NewRoleRepository(db *gorm.DB) ports.RoleRepository {
	return &GormRoleRepository{db: db}
}

// üîç ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ Role ‡∏ï‡∏≤‡∏°‡∏ä‡∏∑‡πà‡∏≠
func (r *GormRoleRepository) FindByName(name string, role *domain.Role) error {
	return r.db.Where("name = ?", name).First(role).Error
}

// ‚ûï ‡∏™‡∏£‡πâ‡∏≤‡∏á Role ‡πÉ‡∏´‡∏°‡πà
func (r *GormRoleRepository) Create(role *domain.Role) error {
	return r.db.Create(role).Error
}
